{"version":3,"file":"465.view.js","mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;;UCVA;UACA;;;;;WCDA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;;ACAA;AACA,UAAU,yBAAyB;AACnC;AACA;AACO;AACP;AACA;AACA;AACA,UAAU,+BAA+B;AACzC;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,kDAAkD;AAChE,cAAc,8CAA8C;AAC5D;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://view/webpack/universalModuleDefinition","webpack://view/webpack/bootstrap","webpack://view/webpack/runtime/define property getters","webpack://view/webpack/runtime/hasOwnProperty shorthand","webpack://view/./src/dom/common/lib/find/worker.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"view\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"view\"] = factory();\n\telse\n\t\troot[\"view\"] = factory();\n})(self, () => {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","onmessage = async (event) => {\n    let { context, term, options } = event.data;\n    postMessage(executeSearch(context, term, options));\n};\nexport function executeSearch(context, term, options) {\n    if (!term) {\n        return [];\n    }\n    let { text, internalCharDataRanges } = context;\n    let ranges = [];\n    // https://stackoverflow.com/a/6969486\n    let termRe = normalize(term).replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n    if (options.entireWord) {\n        termRe = '\\\\b' + termRe + '\\\\b';\n    }\n    let re = new RegExp(termRe, 'g' + (options.caseSensitive ? '' : 'i'));\n    let matches;\n    while ((matches = re.exec(text))) {\n        let [match] = matches;\n        let { charDataID: startCharDataID, start: startOffset } = binarySearch(internalCharDataRanges, matches.index);\n        let { charDataID: endCharDataID, start: endOffset } = binarySearch(internalCharDataRanges, matches.index + match.length);\n        ranges.push({\n            startCharDataID,\n            startIndex: matches.index - startOffset,\n            endCharDataID,\n            endIndex: matches.index + match.length - endOffset,\n        });\n    }\n    return ranges;\n}\nfunction normalize(s) {\n    return s\n        // Remove smart quotes\n        .replace(/[\\u2018\\u2019]/g, \"'\")\n        .replace(/[\\u201C\\u201D]/g, '\"');\n}\nfunction binarySearch(charDataRanges, pos) {\n    let left = 0;\n    let right = charDataRanges.length - 1;\n    while (left <= right) {\n        let mid = Math.floor((left + right) / 2);\n        if (charDataRanges[mid].start <= pos && pos <= charDataRanges[mid].end) {\n            return charDataRanges[mid];\n        }\n        else if (pos < charDataRanges[mid].start) {\n            right = mid - 1;\n        }\n        else {\n            left = mid + 1;\n        }\n    }\n    return null;\n}\n"],"names":[],"sourceRoot":""}